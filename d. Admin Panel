/* ================= ADMIN ================= */

/* ---------- STRUCT ADMIN ---------- */
struct Admin { // struct untuk akun admin
    char username[50];        
    char password[50];        
};

/* ---------- DATA GLOBAL ADMIN ---------- */
struct Admin admins[50];   // array semua admin
int adminCount = 0;        // jumlah admin

/* ---------- FILE ADMIN ---------- */
void saveAdmins() { // menyimpan semua akun admin ke file
    FILE *fp = fopen("admins.txt", "w");
    if (!fp) return;
    fprintf(fp, "%d\n", adminCount);
    for (int i = 0; i < adminCount; i++)
        fprintf(fp, "%s %s\n", admins[i].username, admins[i].password);
    fclose(fp);
}

void loadAdmins() { // membaca akun admin dari file
    FILE *fp = fopen("admins.txt", "r");
    if (!fp) return;
    fscanf(fp, "%d", &adminCount);
    for (int i = 0; i < adminCount; i++)
        fscanf(fp, "%s %s", admins[i].username, admins[i].password);
    fclose(fp);
}

/* ---------- ADMIN LOGIN ---------- */
int adminLogin() { // login admin
    char u[50], p[50];
    clearScreen();
    printf("Username: "); scanf("%s", u);
    printf("Password: "); scanf("%s", p);
    for (int i = 0; i < adminCount; i++)
        if (!strcmp(u, admins[i].username) && !strcmp(p, admins[i].password))
            return 1;
    printf("Login gagal!\n");
    pauseScreen();
    return 0;
}

/* ---------- ADMIN REGISTER ---------- */
void adminRegister() { // register admin baru
    clearScreen();
    printf("New Username: "); scanf("%s", admins[adminCount].username);
    printf("New Password: "); scanf("%s", admins[adminCount].password);
    adminCount++;
    saveAdmins(); // simpan ke file
    printf("Admin berhasil dibuat!\n");
    pauseScreen();
}

/* ---------- MENU ADMIN ---------- */
void adminMenu() { // menu admin
    int c;
    do {
        clearScreen();
        printf("1.Add Bus\n2.View Buses\n3.Logout\nChoose: "); scanf("%d", &c);
        if (c == 1) addBus();
        else if (c == 2) viewBuses();
    } while (c != 3);
}
